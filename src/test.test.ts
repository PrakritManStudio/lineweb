import { describe, it, expect } from "vitest";
import { LineWeb } from "../src/index";
import type { Me } from "../src/type/me";
import { type LineWebError, isLineWebError } from "../src/errors";

const cookies =
  '[{"name":"_GRECAPTCHA","value":"09ANMylNCqcnSPMJsU1OJJWMnCEg63YpEqg5SlKhMeW7cNofDWIeM1aguODxo_OPfIYdDbpW1eQoba6PpDiRYCL3s","domain":"www.google.com","path":"/recaptcha","expires":1772008010.371402,"httpOnly":true,"secure":true,"sameSite":"None"},{"name":"RSESSION","value":"ezI3FjFpH7Rbi8ddTg5MRqIuQf8mi4WvSkuLUw49ZT7Ad7tqn1vKttZykGPMkHYM","domain":"account.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"XSRF-TOKEN","value":"8a19ce82-96f6-4f67-ae2a-e5307818b13a","domain":"account.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"_trmcdisabled2","value":"-1","domain":".account.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmccid","value":"1e634ff2619b8fb9","domain":".line.biz","path":"/","expires":1787992027,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmcuser","value":"{\\"id\\":\\"\\"}","domain":".account.line.biz","path":"/","expires":1759048008,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcsession","value":"{\\"id\\":\\"1e634ff2cf26cd6c\\",\\"path\\":\\"/login\\",\\"query\\":\\"?redirectUri=https%3A%2F%2Fchat.line.biz\\",\\"params\\":{},\\"time\\":1756456008435}","domain":".account.line.biz","path":"/","expires":1756457808,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcpage","value":"/login","domain":".account.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"loginState","value":"ziBClGvtQtWD1U83r3bAn5","domain":"access.line.me","path":"/","expires":1756456610.223699,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"X-SCGW-CSRF-Token","value":"uEtphuOawK6HxZb8tUwxpd","domain":"access.line.me","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"_trmcdisabled2","value":"-1","domain":".access.line.me","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"__try__","value":"1756456010906","domain":".line.me","path":"/","expires":-1,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmccid","value":"6499aa5c7e81eab7","domain":".line.me","path":"/","expires":1787992010,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmcuser","value":"{\\"id\\":\\"\\"}","domain":".access.line.me","path":"/","expires":1759048010,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcsession","value":"{\\"id\\":\\"6499aa5c498179f6\\",\\"path\\":\\"/oauth2/v2.1/login\\",\\"query\\":\\"?returnUri=%2Foauth2%2Fv2.1%2Fauthorize%2Fconsent%3Fresponse_type%3Dcode%26client_id%3D1576775644%26redirect_uri%3Dhttps%253A%252F%252Faccount.line.biz%252Flogin%252Fline-callback%253FredirectUri%253Dhttps%25253A%25252F%25252Fchat.line.biz%25252F%26scope%3Dprofile%26state%3Dl8TThfpwPR04d6S2aMHQYJseWZFegqu&loginChannelId=1576775644&loginState=ziBClGvtQtWD1U83r3bAn5\\",\\"params\\":{},\\"time\\":1756456010911}","domain":".access.line.me","path":"/","expires":1756457810,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"optOutEnabled","value":"false","domain":"access.line.me","path":"/","expires":1756459611.394263,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"qrSes","value":"V2CHQR4258494b4f6a734f6551503772616d7849314879416a4f6e437a704a6a47326a","domain":"access.line.me","path":"/","expires":1756456311.613153,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"cert","value":"ckHMmTMexfYuIwgy6UVGMyAnEkQddekLWDL4r/kyAY5B9WyBr9M0LkNo73ImtgnZc2ZdzauW/KkNhRukZ9F7AZFJijEyJGRKxqXhVvSRkEGSeiBOspyPGaM/xQLG4VDO3J0R3Etjm4r9XTv4QUf5RU6RQ3e9eadcseKyDjOHWBuRvgRc6AhKfX6ioCb/bOM4k8sqJT09yF+Ktz3oL09d7RoKm2/2cUra8ChJwzhmZTcW1WEfxKwttJ287TY39COrvhMbRRKtS7mn8RD+MbvcEQIpywB9S67ESwY+EhZaHcI8nUHi+itFggoYfjeYohpdg+BTCV+DcoiKXSgPynaumooIvWThV843viLWniCKWHUFSmLSmHgCtmeOmO0fAM3BfuzodYNDDvPkLgQfhJ847FUnIAMQ4ZbesFzK5T3DSO2NL45l3hIKrSV+gk5dOd116V/TQnhnQRDWudDvuoiPe2aJ2hXBF6j69VGI7UrUnPaG2Gno3g0w3Hp7/ykqdj7bkNjj9+6AYKo0SPOwPhFqEA+eXyW++ygl+uAOu86VpmUmUIOjf9AeRsw/aZGCXVRINofou3CbPVVlUA7qFI4E0po+TWFcxqurVGJ8vJdqu8HD7ed0WUnbS7CAlUQl1VsAQ5ZDR2CM7NFX0abxz0L28y/PmBhQjz6AKgfT61muIPBaaBO43rTf6BVa8aOycZQ5KtA5Vg6igXyHWCpSmDBtxIoVXli156GDn5JceU3OnLD/2oAGPKRcL38vd5wsYSB2G3xRDWIs8zd85tTtkILGUwZtRDYeXu1zCVnUK2vXvHZYN3Yu16hpt6EFMCrvIzIH","domain":"access.line.me","path":"/","expires":1787992024.698365,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"qrPinCert","value":"O+0kwe1D/4jIafB8HAESTXcq23UkP7P15GnEdUxVBrQ8tDRDePCWp6ajLnq7Go9Omq62WlaqDRBze/7eL8Kl62U6Bb40uGytvMbSFAkGCHsojYIaG6b9gLmjg+q7zKv0ioi1fkM5E5WO/7JWSsRmYv7wsb5fDjfq903vQ3XDE+GxCjJEnbD63ClbWoZ3DdPTJ/Kk9egfVp9hZ+KfEq7Wa3wjzAvGEOM7w2KLLDKhxZwvn2GVUGoKxsBfOmLslFP6hIF82vN2EgYY34bVYiRaeRgTSPDhmJ6GcMUvcq74yw4I3Ya/wGA8cG7CJT6BWSCwd7BqH7CZYROkMe2zS9Kf2NfgFbhA1s717EYlLmUWTvzq4mVJzpW1DKH7QQi0QY/RZP5kLe7zTVRIe5A3ZVFSlAe6egBVXT3bLG+uMMbaAnLlMbD66JeVi5R0UAfw7SnUXpYEL26cD5nDdZRNzFvzkp8gOrZjsHTzvleAeIW8Cn5OE1n2rX3hhtcrr4ynQ4gFYvw/kkI1VAuElo8APN2p2izA2zZeFW3IjVR1qrVVgHQIFXH/k6mmo1gE2fHkSiZhQvBSnS2jeaZmDkESXQtYkpEZ748M6kfIap+VoAY7GtTruq/1sPMwWHSlgS4JBPBgUfBiex25OaPPkH2TfHAdwybms3FH68ySSxyk5rbA//91lTmQ8ynUyV6nfOVHqsBaXvXJhJYm5zd+i4Ytxc9Ux24v0GpSdJpRLTqYwPme67eaPpM3dwH1dm/rBsJwSOEDWXfxKZOHoVCxcy6fqLVmDYFdCgQfSec+J6Ou5Yjx/L4=","domain":"access.line.me","path":"/","expires":1759048024.698442,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"__Host-SID","value":"hQufgIpVqMaoE76OCSZxYdN4kB1mkUs3kR1iQk558N8","domain":"access.line.me","path":"/","expires":1759048024.91298,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"__is_login_sso","value":"1","domain":".line.me","path":"/","expires":1759048024.913046,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_ldbrbid","value":"lo__wOf_euE4OedKNRPNvdhG7oTwCvOYq_N4u1myutZWU9g","domain":".line.me","path":"/","expires":1791016024.913061,"httpOnly":false,"secure":true,"sameSite":"None"},{"name":"__Host-ses-account","value":"fzKsbXRjPjJyJjxjeImxJkpjTmeVJjxjZXyoJkpjSWNzOUZjgR.fzKaeXJjPjKzNoSScXWObaKAeGJ3ZUAsZnKbXmGtcYGAZXp1VGByeliFW2SabEA1c2eJOEKONFKLVGOUPHGDXYSIAWCnAVmySzJtJnG1ADJ6JoCzbX1idoljMDKmfIBjPkF3OUZ1OEJ0NkA9.Ncx3wFO5DP17iJOGtA_sE9DfAGEyaWb9Bovy-9o1vKByZVZJupNODy3yXPD0SUj55Zsxalj5pr1SI6KC6QKoTh","domain":"account.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"ses","value":"fzKsbXRjPjJyJjxjeImxJkpjTmeVJjxjZXyoJkpjSWNzOUZjgR.fzKaeXJjPjKzNoSScXWObaKAeGJ3ZUAsZnKbXmGtcYGAZXp1VGByeliFW2SabEA1c2eJOEKONFKLVGOUPHGDXYSIAWCnAVmySzJtJnG1ADJ6JnymA2GkfTJtJnW4dDJ6NUd1OkV0NkRzOo0.TcRN1APUFycV-Ih_uVarY3CaVCva9ONlq-1i_mdrWcEN8pMdtRvGTGMLJ2UgxUWaP9M4nqQH_-N9ZX3pkLlG5x","domain":".line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"chat-device-group","value":"150","domain":"chat.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"__Host-chat-ses","value":"fzKsbXRjPjJyJjxjeImxJkpjTmeVJjxjZXyoJkpjSWNzOUZjgR.fzKaeXJjPjKzNoSScXWObaKAeGJ3ZUAsZnKbXmGtcYGAZXp1VGByeliFW2SabEA1c2eJOEKONFKLVGOUPHGDXYSIAWCnAVmySzJtJnG1ADJ6JkljMDKmfIBjPkF3OUZ1OEZxNkA9.-dDpL2xaFvQaC8Gv-b2Bmp0i13tx7U-RSXR3qXE5os1BEgdolOOkjHIg6qYMamJDJTqFV2HESqOEVrEJYzpbzR","domain":"chat.line.biz","path":"/","expires":1756546025.428697,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"_trmcdisabled2","value":"-1","domain":".chat.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"__try__","value":"1756456027260","domain":".line.biz","path":"/","expires":-1,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmcuser","value":"{\\"id\\":\\"\\"}","domain":".chat.line.biz","path":"/","expires":1759048027,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcsession","value":"{\\"id\\":\\"3914c8a7c1da2930\\",\\"path\\":\\"/\\",\\"query\\":\\"?status=success\\",\\"params\\":{},\\"time\\":1756456027267}","domain":".chat.line.biz","path":"/","expires":1756457827,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_uts_cid_719894379","value":"bcbc3ba3-6162-450e-bd1a-e497a31b588b","domain":".line.biz","path":"/","expires":1787992027.617139,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcpage","value":"/pc/hashBotId","domain":".chat.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_uts_cs_719894379","value":"{\\"sid\\":\\"4ebf0b5a-1cc8-4d2c-8640-a0ca342bc921\\",\\"sq\\":0,\\"expiredAt\\":1756457827617}","domain":".chat.line.biz","path":"/","expires":1787992027.617717,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"XSRF-TOKEN","value":"41cd4e74-ee9f-4248-9b23-39781b78b8db","domain":"chat.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"}]';
// const cookies = '[{"name":"_GRECAPTCHA","value":"09ANMylNC2j0f7OZcUwUfuwP0UWk6W2t-qfAqD7S15vv9AbP8ifZ1vdlshmgYz5taFJ__GyopOgEc-ptmoGo4gS98","domain":"www.google.com","path":"/recaptcha","expires":1770697275.588055,"httpOnly":true,"secure":true,"sameSite":"None"},{"name":"RSESSION","value":"dIGZKCOt249EUC3YttWMhpzm5eALhvno8UZRrUtVhKP2FI8rxHBVpwaNHc3YNXhC","domain":"account.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"XSRF-TOKEN","value":"4370467a-874e-4df4-81e4-2029d73f89c1","domain":"account.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"_trmcdisabled2","value":"-1","domain":".account.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmccid","value":"333c0eb903879115","domain":".line.biz","path":"/","expires":1786681297,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmcuser","value":"{\\"id\\":\\"\\"}","domain":".account.line.biz","path":"/","expires":1757737273,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcsession","value":"{\\"id\\":\\"333c0eb9e1ef4bcc\\",\\"path\\":\\"/login\\",\\"query\\":\\"?redirectUri=https%3A%2F%2Fchat.line.biz\\",\\"params\\":{},\\"time\\":1755145273697}","domain":".account.line.biz","path":"/","expires":1755147073,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcpage","value":"/login","domain":".account.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"loginState","value":"9wOTc4FbhUyxoHQRxfLZ3g","domain":"access.line.me","path":"/","expires":1755145875.549515,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"X-SCGW-CSRF-Token","value":"cnF5JYjVtj6v8zSvjxkrow","domain":"access.line.me","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"_trmcdisabled2","value":"-1","domain":".access.line.me","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"__try__","value":"1755145276103","domain":".line.me","path":"/","expires":-1,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmccid","value":"a2c2cd873e6b3405","domain":".line.me","path":"/","expires":1786681276,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmcuser","value":"{\\"id\\":\\"\\"}","domain":".access.line.me","path":"/","expires":1757737276,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcsession","value":"{\\"id\\":\\"a2c2cd8745073de6\\",\\"path\\":\\"/oauth2/v2.1/login\\",\\"query\\":\\"?returnUri=%2Foauth2%2Fv2.1%2Fauthorize%2Fconsent%3Fresponse_type%3Dcode%26client_id%3D1576775644%26redirect_uri%3Dhttps%253A%252F%252Faccount.line.biz%252Flogin%252Fline-callback%253FredirectUri%253Dhttps%25253A%25252F%25252Fchat.line.biz%25252F%26scope%3Dprofile%26state%3Dlgyznh01mIe2q1Sa3rU5jB6tWjsXfND&loginChannelId=1576775644&loginState=9wOTc4FbhUyxoHQRxfLZ3g\\",\\"params\\":{},\\"time\\":1755145276107}","domain":".access.line.me","path":"/","expires":1755147076,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"optOutEnabled","value":"false","domain":"access.line.me","path":"/","expires":1755148876.695191,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"qrSes","value":"V2CHQR4d505a7a7446326d6557663967554f73417572456d4350366c47576861314864","domain":"access.line.me","path":"/","expires":1755145577.026483,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"cert","value":"9KYhdMWM7Kxcba2KAGv5X6V+UibcjGADMSgx1ZpAm/8RlVKPIWsk0YKfkLuVIVOIkYwn/rmvUAhd+W0TTelwHaBex3RDRA6SDZcEdemX9I4ZvfB+o4HeqS5bZ69jd2qBSG/TrJWzILBqKmBfUcQngPf18wkzxTwHHsfCkbh40yXWgIoUmRLRYRqYZnMZo1yeKVHPVbERoCYEbaK3JfMn9MixqAISxOHvhxYKTISs5mFWM62dvGMKCXQCtPFT20/T9079w+sFwJ285fyTX0wUUn2X+/GiVHZ678XWZkhWxxYSnXfdsghqimMxi4BUtenUkTcgMtqFSlxR7ne9vL7aqWeYA3Mynbac+m1HfGA6zM3apTTNifZiu0T0/9gkeOvPeJLIc+ZKNEOGStUcCn2PWF9xocZaXV8dcdsza2JQbtfs6/sOv+4BmH7/FawM22tpScOYlZTOt1dY+LkrtwshemPqRuPKXsn/UrMRp5foZXYpcnbBjVrpv8lENb5iAklNvTccpwC3hGSg87VhXNza7z1wlnFWxl3nAJC5LJjLA/ey3C9LOfjYYfUnzR4w3o4SkCdKeCfplBaWQOiEaoBpKlV3DiG+LXNtO+vrGMSv8lMGjZP16ZOj5emRO79LFiEopIO3cAaRYII3i3X0emqY8gVpdPLYTuGhxP3QXxlKOcxsKxkr+9WY23HNW/NoL8KnGRHCnHdgnhlcb2iYXCPp5lViTsgExqeaTG2HgdRvf1amk7+jS0eXCelBe9BCyOK1s478s7a/YBWjeklAHKqOFG9Xd/kmsgI7q2zvxn94fBio/90N2S5U3LP3YkSPWVsC","domain":"access.line.me","path":"/","expires":1786681292.058318,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"qrPinCert","value":"xkChoad3Sqn+K1W8NY8z4VibZT5rYD2O5P+XflVeF0195iK8bZaOJFQA6OmBywTmY8kDsmDsfN2LuxCNWotXQbUv0bCGl8copwNhzKn73a9Yk28Hi5KBlmNenKyosifFLPexeWKtqFJ5+fmgIwe07xvZ+4uYitMgBWbgzTfyB+ETAhASz8Czbj7VdFyYpVewHxvTeDPsPD0kpu0g2dVFOmPayD8kedQgA7Pl2nC9V0bYst9KlIHoRubpUSPpwM+DM0ZjnpayPlbVMjgJ/3Xx0x1BaFYHHNCmGIuj0p57Bp9HfVOzwYfLzuiWDBIlUG+L4Gqe0GwuS03HYb8QgyyaIzvONtcqkG2YHqj8+FjCEm60qIKOicrflDIFJ3wfLQkk3eQbnpJhP2TBy3egpc56Ay/uEM+7Co5qZBg8pfjaXllu+6eXK6DRT1l2zptD2CAus44EJcNHCiKFb4NGVRRJz8j1PUVqQKceLXgLwz9IQrCczI5eaU8BY8J8c2TJnq/r6RfrQXWinfBSraMNGRIHxDJAyT56KQWWK+KKga2CHj5sT314p2s47dcrliR3O+Wy7kZNwr2C7lN/JGVslix/4DCVJ73ayvndExccDxhtOEONANf5soSHBN0jDJPD7iRBH+BH3AmRcsYyUTZbjLmlxuc1R4CjDM4Lw3UWp6I6yviMnVBm0nWmXJnYj5VlRyv8RSD0JGeChgLfQCo7IUnXhY/iRQuJL2ygBI+/JWdfuzrFqrXV4fTU9nvJw/LTGNDveUNwripPtlaeU2vbJ2TxlFAPY5nRSmPQvbRWcgQjRjU=","domain":"access.line.me","path":"/","expires":1757737292.058386,"httpOnly":true,"secure":true,"sameSite":"Strict"},{"name":"__Host-SID","value":"MZiDDfmtIDtAU7aEfjqR4h09bSSrikUEljkFpvRkUlS","domain":"access.line.me","path":"/","expires":1757737292.253446,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"__is_login_sso","value":"1","domain":".line.me","path":"/","expires":1757737292.253508,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_ldbrbid","value":"lo__IRyHM8aW0EwCsLltuHA-s36S_Sczk3CWb-0payOBzis","domain":".line.me","path":"/","expires":1789705292.253524,"httpOnly":false,"secure":true,"sameSite":"None"},{"name":"__Host-ses-account","value":"fzKsbXRjPjJyJjxjeImxJkpjTmeVJjxjZXyoJkpjSWNzOUZjgR.fzKaeXJjPjKmWFO4SV1oV2eYcl43XH1nbXWlZ3OFUoRzZkK4c3q0Z3SkS3lzdESieaevd0WvNXq2dF5leWCobVqWb21sS1ONUTJtJnG1ADJ6JoCzbX1idoljMDKmfIBjPkF3OUVzNaF2PUW9.Vez66kED3PtMDl2pxng0Q9r50dzxs318F5oWaalT_i6l4kQogSPaLKfQ-4n2MMYns6cS-kfhO1lp_0AydY2Zgh","domain":"account.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"ses","value":"fzKsbXRjPjJyJjxjeImxJkpjTmeVJjxjZXyoJkpjSWNzOUZjgR.fzKaeXJjPjKmWFO4SV1oV2eYcl43XH1nbXWlZ3OFUoRzZkK4c3q0Z3SkS3lzdESieaevd0WvNXq2dF5leWCobVqWb21sS1ONUTJtJnG1ADJ6JnymA2GkfTJtJnW4dDJ6NUd1OUJaNUZ5OY0.ojx20WiJDJW1Tsi5148ZcSCrNZpMDMemrEccmYa8umCt8G1AbkjY1Ug6lZJz72l8BP-geA8H6evTv1N0Ym3AQB","domain":".line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"chat-device-group","value":"413","domain":"chat.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"__Host-chat-ses","value":"fzKsbXRjPjJyJjxjeImxJkpjTmeVJjxjZXyoJkpjSWNzOUZjgR.fzKaeXJjPjKmWFO4SV1oV2eYcl43XH1nbXWlZ3OFUoRzZkK4c3q0Z3SkS3lzdESieaevd0WvNXq2dF5leWCobVqWb21sS1ONUTJtJnG1ADJ6JkljMDKmfIBjPkF3OUVzNaVzPUW9.kKRhpGk6AmU9FtO53oJ5-nuyOPI50xlys7ouBKJGYD1StZNXDC1uGyEXwezNIy6MABkcggGbqEHOWdztSgNrgh","domain":"chat.line.biz","path":"/","expires":1755235295.295742,"httpOnly":true,"secure":true,"sameSite":"Lax"},{"name":"_trmcdisabled2","value":"-1","domain":".chat.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"__try__","value":"1755145297688","domain":".line.biz","path":"/","expires":-1,"httpOnly":false,"secure":false,"sameSite":"Lax"},{"name":"_trmcuser","value":"{\\"id\\":\\"\\"}","domain":".chat.line.biz","path":"/","expires":1757737302,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcsession","value":"{\\"id\\":\\"ebc898fe6ed92209\\",\\"path\\":\\"/\\",\\"query\\":\\"?status=success\\",\\"params\\":{},\\"time\\":1755145297694}","domain":".chat.line.biz","path":"/","expires":1755147102,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_uts_cid_719894379","value":"b7bb86a3-2e6a-4168-a82d-e4bf117da428","domain":".line.biz","path":"/","expires":1786681299.189037,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_trmcpage","value":"/pc/hashBotId","domain":".chat.line.biz","path":"/","expires":-1,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"_uts_cs_719894379","value":"{\\"sid\\":\\"50722444-9bbc-4cf6-bca2-0d97e271ea27\\",\\"sq\\":0,\\"expiredAt\\":1755147099189}","domain":".chat.line.biz","path":"/","expires":1786681299.1894,"httpOnly":false,"secure":true,"sameSite":"Lax"},{"name":"XSRF-TOKEN","value":"e80a2636-5942-4044-98bf-02a97377bbbf","domain":"chat.line.biz","path":"/","expires":-1,"httpOnly":true,"secure":true,"sameSite":"Lax"}]';

describe("LineWeb.getMe (integration)", () => {
  it("should fetch user profile from real API", async () => {
    if (!cookies) throw new Error("No cookies provided in env");
    try {
      const lineWeb = new LineWeb({ cookies });
      //   await lineWeb.logout(); // test logout function
      const me = await lineWeb.getMe();
      // console.log(me);
      // const bots = await lineWeb.getBots({});
      //   console.log(bots);
      // const owners = await lineWeb.getOwners({
      //   webBotId: "Ub806ec4aa424b69a43e41eceb6d8fe66",
      // });
      // const tags = await lineWeb.getTags({
      //   webBotId: "Ub806ec4aa424b69a43e41eceb6d8fe6",
      // });
      // console.log("tags", tags);

      // const chats = await lineWeb.getChats({
      //   webBotId: "Ub806ec4aa424b69a43e41eceb6d8fe66",
      // });
      // console.log("chats", chats);

      await lineWeb.logout();
      const contacts = await lineWeb.getContactByName({
        webBotId: "Ub806ec4aa424b69a43e41eceb6d8fe66",
        chatName: "test",
        maxPages: 0,
        limitPerPage: 1,
      });
      console.log("contacts", contacts);
      return;
    } catch (error: unknown | LineWebError) {
      if (isLineWebError(error)) {
        console.log("Code:", error.code);
        console.log("Message:", error.message);
        if (error.status) {
          console.log("Status:", error.status);
        }
        return;
      }
      console.log("------------error ยังไม่ handle-------------");
      console.log("------------error-------------");
      console.log("------------error-------------");
    }
    // สามารถ expect field อื่นๆ ได้ตาม type Me
  });
});
